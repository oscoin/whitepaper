\section{The Oscoin Network}
\label{s:oscoin}

\noindent In this paper, we introduce \oscoin{}, a cryptocurrency protocol
designed to provide a solution to the open source sustainability problem.

\Oscoin{} is a public network of computers participating in a consensus
protocol around a shared transaction ledger.
This ledger is materialized into a global state $\state$ which
contains the canonical registry $\registry$ of all open source
projects participating in the protocol; a set of accounts
$\accounts$, containing the balances of all currency holders; and
a network graph $\netgraph$, of the relevant relations between
entities in the network, including software dependencies between registered projects.

The purpose of this network is to secure a digital currency---\oscoin{}---and
reward the most valued projects in the network, without the need
for intermediaries or central control.

\subsection{The Oscoin Blockchain}

To design a safe, open, ``permissionless'' currency shared amongst all network
participants, we propose \oscoin{} as a blockchain protocol, as
described by Nakamoto \cite{bitcoin} and Wood \cite{ethereum}.

Though the specific choice of the underlying consensus mechanism is not
critical to \oscoin{}, we believe that one which allows open
participation is best for the long term health of the network. Furthermore,
it's important that reliable support for light clients be possible, since
running a full node is prohibitively expensive in most environments that could
benefit from \oscoin{}. As of today, the only family of blockchain protocols with these
characteristics are the \emph{proof-of-work} protocols.\footnote{Proof-of-work blocks
can be verified cheaply and securely on most mobile devices available
today, as demonstrated by Bitcoin. In contrast, proof-of-stake protocols,
a common alternative, rely on stakeholder signatures, which require access to
account balances to be validated, and thus block data must be downloaded and
verified, or account balances must be queried repeatedly from third-parties,
neither of which is feasible in constrained environments.} However, we are
fully aware of the effects on the environment of proof-of-work at
scale and propose to transition to a more energy-efficient protocol in the future.
One likely candidate is the \emph{Proof-of-Storage} family of protocols outlined
in Filecoin~\cite{filecoin}.

\begin{figure*}[!ht]
    \par\medskip\noindent\minipage{\linewidth}
    \centering
    \input{figures/oscoin.tikz}
    \caption{The \Oscoin{} Treasury System\label{f:treasury}}
    \endminipage\par\medskip
\end{figure*}

\subsection{The Oscoin Treasury}
\label{s:treasury}

The treasury system (Figure \ref{f:treasury}) is designed to continuously
rank projects on the network based on relative importance, and reward them with
\oscoin{}. This mechanism is key to the network and fulfills the
role of stimulating the economy and providing sustainable incentives for
maintainers.

\subsubsection{Overview}

\begin{itemize}
    \item Maintainers and contributors collaborate on software projects
        registered in the network.
    \item Maintainers merge contributions and synchronize their project state
        with the ledger, which includes per-project dependency information and
        contribution metadata (\S\ref{s:checkpointing}).
    \item Every $\epoch$ blocks, the \osrank{} of each project is calculated
        (\S\ref{s:osrank}), based on the above metadata.
    \item A reward in \oscoin{} is derived from each project's \osrank{},
        and distributed via the project's smart contract (\S\ref{s:smart-contracts}).
    \item Depending on the project's smart contract, a share of the reward flows
        to contributors and maintainers of the project.
    \item These rewards in \oscoin{} follow a fixed vesting schedule, after which
        they can be transfered out of the project.
\end{itemize}

\medskip

\noindent Each block, the protocol is allowed to mint a certain amount $B_r$ of \oscoin{}
(the ``block reward''), as part of what we call the \emph{coinbase}
transaction. These coins are allocated to two distinct groups: network
operators (``miners''), formally $\miners$, and open source projects ($\projs$)
through the treasury system.
% TODO: Are they allocated to contributors?

The key question we must address, is what share of $B_r$ is distributed to
individual projects and contributors in the network.
For this, we leverage the \oscoin{} network graph $\netgraph$ (Section
\ref{s:netgraph}), which maps value flows between projects and contributors,
and assigns a weight to each. This weight $\omega(x)$ we call \osrank{}, represents
the relative importance of entities within the network.

\subsubsection{Algorithm} Let $t$ be the total amount of \oscoin{} distributed
to $n$ projects every epoch $\epoch$. The amount $t_P$ distributed to a given
project $P$ over $\epoch$ is a function $\psi$ of its \osrank{} $\omega(P)$,
which awards higher ranking projects with more \oscoin{}. We describe this
\emph{reward function} as
\[
    \psi(t, \omega(P)) \to t_P
\]
To prevent trivial Sybil attacks, the payment function takes
into account a minimum threshold for $\omega(P)$ under which a project does not
receive funds. Rewards can be further equalized by adjusting $\psi$ to
compress or expand the reward range.

\subsubsection{Vesting} To align incentives in the network, \oscoin{} received
as a reward follows a fixed \emph{vesting schedule}. Practically, this means
that full ownership of the rewarded balance is not immediate, but acquired over time. The
intent of such a system is to discourage opportunistic behavior, and give \oscoin{}
holders an interest in the network's longer-term future. Once the reward is
fully vested, it may be transfered out of the account with no restrictions.

\bigskip

\noindent At scale, the \oscoin{} treasury has the potential to solve many of
the issues with open source monetization and sustainability. Projects can
receive income in the form of \oscoin{}, while licensing their work as free
software. This continuous algorithmic funding moves
away from current ``transactional'' models---which require open source projects
to change the way they work, re-license or setup a business---to a new model,
which aligns with the motivations that lead to the success of the free software
movement.\footnote{See \emph{The Cathedral and the Bazaar}, by Eric S. Raymond}

