\section{The \oscoin{} Network}

% Objectives
% ==========
% * Describe how oscoin works
% * Explain how money flows to the most valuable projects
% * Explain how this solves the sustainability problem
% * Explain how we tie money with OSS / how we link money with the dependency graph

% TODO: Diagram that shows Dependencies -> SrcRank -> Block reward -> Distribution

\noindent In this paper, we introduce \oscoin{}, a protocol and currency
designed to provide a solution to the open source sustainability problem (\S
\ref{sustainability}).

The \oscoin{} network is a public network of computers operating a distributed
consensus protocol around a transaction ledger.

This ledger is materialized into a shared state $\state$ which
contains the canonical registry $\mathcal{R}$ of all open source
projects participating in the \oscoin{} protocol; a set of accounts
$\mathcal{A}$, containing the balances of all currency holders; and
finally a network graph $\netgraph$, of relevant relations between
entities in the network, including in particular dependencies between
registered projects.

The purpose of this network is to secure a digital
currency---\oscoin{}---and its monetary policy which rewards the most
valued open source projects in the network, without the need for
intermediaries or central control.

\subsection{The \oscoin{} Blockchain}

The \oscoin{} network is composed of a set of nodes, or \emph{replicas}, which
execute a distributed protocol. Together, these nodes form a \emph{Replicated
State Machine} with a set of states $\state$, a transition function $\apply$,
a starting state $\state_0$ or ``genesis'', a set of inputs $B_0 \dotso B_n$,
and a set of outputs.

To allow for the creation of a safe, open (``permissionless'') currency shared
amongst all network participants, we use a blockchain protocol, as described by
Nakamoto in \cite{bitcoin} and Wood in \cite{ethreum}.

Though the specific choice of the underlying consensus mechanism is not
directly relevant to \oscoin{}, we believe that one which allows open
participation is best for the long term health of the network. Furthermore,
it's important that reliable support for light clients be possible. The only
family of blockchain protocols with these characteristics are the proof-of-work
protocols. We thus settle on Nakamoto~\cite{bitcoin} consensus.

The inputs $B_0 \dotso B_n$ to the state machine are therefore blocks, with
$B_0$ being the genesis block.

% TODO: Hashing function?

% \begin{figure*}[!ht]
%     {\par\medskip\noindent\minipage{\linewidth}}
%     \centering
%     \input{figures/oscoin.tikz}
%     \caption{Oscoin Monetary Policy\label{f:oscoin}}
%     {\endminipage\par\medskip}
% \end{figure*}

\subsection{Monetary Policy}

\begin{itemize}
    \item Maintainers and contributors collaborate around software projects
        registered on the network.
    \item Maintainers specify what other projects their projects depend on.
    \item Every $n$ blocks, projects have their \osrank{} calculated, and a
        token reward is calculated for each, in proportion to their rank.
    \item The rewards are sent to the given projects.
    \item Projects are able to use the funds how they see fit. \emph{Smart
        contracts} are used as a means for distribution of tokens from within a
        project, to its constituent members or contributors.
\end{itemize}

Each block, the protocol is allowed to mint a certain amount $B_r$ of \oscoin{}
(the ``block reward''), as part of what we call the \emph{coinbase}
transaction. These coins are divided into two shares, the first serving as a
reward to the block miner, while the second is used to supply the reward
mechanism for open-source projects.

\subsubsection{Token distribution}

The key question we must answer, is how the block reward is distributed to
projects on the network.

The goal is to choose a distribution mechanism that benefits the network as a
whole, while needing the least amount of maintenance.

For this, we turn to the network graph $\netgraph$, which includes in
particular the graph of dependencies between projects.

Each project registered in the network is required to specify which other
projects it depends on. For example, a web framework might depend on an HTTP
library, and that HTTP library might depend on an OpenSSL implementation.

Registering a project requires a small deposit. This is to prevent the ledger
from being filled with abandonned projects, and because projects can influence
reward distribution through the dependency graph. This also makes  Sybil attacks and spam costly to attackers.

Still, it's possible that project maintainers act dishonnestly, by lying about
their dependencies. We propose a way to mitigate this in \S \ref{srcrank}.

\subsubsection{Algorithm} Let $T$ be the amount of \oscoin{} to be distributed to
$N$ project every epoch. The amount $T_P$ distributed to a given project
$P_n$ is in proportion to its \osrank{}. \osrank{}, described in \S \ref{srcrank}
is a centrality measure that assigns a weight $P_w$ to each project by following
links in the network graph $\netgraph$.

The amount of tokens received every epoch by $P_n$ is thus $T_P / P_w$, with
a minimum threshold, under which the project doesn't receive anything. This
threshold prevents small attacks from succeeding, while also compressing the
rewards.

With this model, itâ€™s the responsibility of a project to choose its
dependencies well and to maintain its stated dependencies up to date, since by
depending on a project, it is casting a vote for that project to receive money.
This is amplified for highly-weighted projects in the graph.

The model we described distributes tokens on a continuous basis to the projects
most valued by the network. It does so by periodically minting new \oscoin{}
that it distributes according to the \osrank{} metric. At scale, this has the
potential to solve many of the issues with open source monetization and
sustainability, as software projects receive income in the form of \oscoin{}
by giving away their work for free.

% TODO: Explain how this is non-transactional and you don't have to change the
% way you work.
